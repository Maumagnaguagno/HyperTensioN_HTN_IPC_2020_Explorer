// Generated by Hype
digraph "factories" {
  nodesep=1
  ranksep=1
  // Operators
  node [shape=record]
  "construct" [
    label="{{\N|?f ?r ?l}|{(location-free ?l)\l(resource-at ?r ?l)\l|(factory-at ?f ?l)\l(factory-constructed ?f)\lnot (resource-at ?r ?l)\lnot (location-free ?l)\l}}"
  ]
  "fuse" [
    label="{{\N|?r ?r1 ?r2 ?l}|{(resource-at ?r1 ?l)\l(resource-at ?r2 ?l)\l|(resource-at ?r ?l)\lnot (resource-at ?r1 ?l)\lnot (resource-at ?r2 ?l)\l}}"
  ]
  "produce-without-demands" [
    label="{{\N|?r ?f ?l}|{|(resource-at ?r ?l)\l}}"
  ]
  "produce" [
    label="{{\N|?r ?rd ?f ?l}|{(factory-at ?f ?l)\l(resource-at ?rd ?l)\l|(resource-at ?r ?l)\lnot (resource-at ?rd ?l)\l}}"
  ]
  "pickup" [
    label="{{\N|?r ?l}|{(resource-at ?r ?l)\l(truck-at ?l)\l|(resource-in-truck ?r)\lnot (resource-at ?r ?l)\l}}"
  ]
  "drop" [
    label="{{\N|?r ?l}|{(truck-at ?l)\l(resource-in-truck ?r)\l|(resource-at ?r ?l)\lnot (resource-in-truck ?r)\l}}"
  ]
  "move" [
    label="{{\N|?l1 ?l2}|{|(truck-at ?l2)\lnot (truck-at ?l1)\l}}"
  ]
  // Methods
  node [shape=Mrecord]
  "construct_factory" [
    style=bold
    label="{{\N|?f ?l}|{<0>construct_factory_m_factory_already_constructed|<1>construct_factory_m_construct_factory}}"
  ]
  "construct_factory_m_factory_already_constructed" [
    label="{{\N|}|(factory ?f)\l(location ?l)\l(factory-at ?f ?l)\l}"
  ]
  "construct_factory":0 -> "construct_factory_m_factory_already_constructed" [style=dotted]
  "construct_factory_m_construct_factory" [
    label="{{\N|?r}|(factory ?f)\l(resource ?r)\l(location ?l)\l(demands ?f ?r)\l(location-free ?l)\lnot (factory-constructed ?f)\l|<0>get_resource ?r ?l|<1>construct ?f ?r ?l}"
  ]
  "construct_factory":1 -> "construct_factory_m_construct_factory" [style=dotted]
  "construct_factory_m_construct_factory":0 -> "get_resource"
  "construct_factory_m_construct_factory":1 -> "construct"
  "get_resource" [
    style=bold
    label="{{\N|?r ?l}|{<0>get_resource_m_resource_there|<1>get_resource_m_get_resources_and_fuse|<2>get_resource_m_get_resource}}"
  ]
  "get_resource_m_resource_there" [
    label="{{\N|}|(resource-at ?r ?l)\l}"
  ]
  "get_resource":0 -> "get_resource_m_resource_there" [style=dotted]
  "get_resource_m_get_resources_and_fuse" [
    label="{{\N|?r1 ?r2}|(resource ?r1)\l(resource ?r2)\l(fuses ?r ?r1 ?r2)\l|<0>get_resource ?r1 ?l|<1>get_resource ?r2 ?l|<2>fuse ?r ?r1 ?r2 ?l}"
  ]
  "get_resource":1 -> "get_resource_m_get_resources_and_fuse" [style=dotted]
  "get_resource_m_get_resources_and_fuse":0 -> "get_resource"
  "get_resource_m_get_resources_and_fuse":1 -> "get_resource"
  "get_resource_m_get_resources_and_fuse":2 -> "fuse"
  "get_resource_m_get_resource" [
    label="{{\N|?f ?fl}|(factory ?f)\l(location ?fl)\l(produces ?f ?r)\l|<0>construct_factory ?f ?fl|<1>produce_resource ?r|<2>deliver_resource ?r ?l}"
  ]
  "get_resource":2 -> "get_resource_m_get_resource" [style=dotted]
  "get_resource_m_get_resource":0 -> "construct_factory"
  "get_resource_m_get_resource":1 -> "produce_resource"
  "get_resource_m_get_resource":2 -> "deliver_resource"
  "produce_resource" [
    style=bold
    label="{{\N|?r}|{<0>produce_resource_m_produce_resource|<1>produce_resource_m_get_and_produce_resource}}"
  ]
  "produce_resource_m_produce_resource" [
    label="{{\N|?l}|(location ?l)\l(produces factory_0 ?r)\l(factory-at factory_0 ?l)\l|<0>produce-without-demands ?r factory_0 ?l}"
  ]
  "produce_resource":0 -> "produce_resource_m_produce_resource" [style=dotted]
  "produce_resource_m_produce_resource":0 -> "produce-without-demands"
  "produce_resource_m_get_and_produce_resource" [
    label="{{\N|?rd ?f ?l}|(resource ?rd)\l(factory ?f)\l(location ?l)\l(produces ?f ?r)\l(demands ?f ?rd)\l(factory-at ?f ?l)\l|<0>get_resource ?rd ?l|<1>produce ?r ?rd ?f ?l}"
  ]
  "produce_resource":1 -> "produce_resource_m_get_and_produce_resource" [style=dotted]
  "produce_resource_m_get_and_produce_resource":0 -> "get_resource"
  "produce_resource_m_get_and_produce_resource":1 -> "produce"
  "deliver_resource" [
    style=bold
    label="{{\N|?r ?l}|{<0>deliver_resource_m_deliver_resource}}"
  ]
  "deliver_resource_m_deliver_resource" [
    label="{{\N|?ls}|(location ?ls)\l(resource-at ?r ?ls)\l|<0>goto ?ls|<1>pickup ?r ?ls|<2>goto ?l|<3>drop ?r ?l}"
  ]
  "deliver_resource":0 -> "deliver_resource_m_deliver_resource" [style=dotted]
  "deliver_resource_m_deliver_resource":0 -> "goto"
  "deliver_resource_m_deliver_resource":1 -> "pickup"
  "deliver_resource_m_deliver_resource":2 -> "goto"
  "deliver_resource_m_deliver_resource":3 -> "drop"
  "goto" [
    style=bold
    label="{{\N|?l}|{<0>goto_m_goto|<1>goto_m_already_there}}"
  ]
  "goto_m_goto" [
    label="{{\N|?l1 ?l2}|(location ?l1)\l(location ?l2)\l(truck-at ?l1)\l(connected ?l1 ?l2)\l|<0>move ?l1 ?l2|<1>goto ?l}"
  ]
  "goto":0 -> "goto_m_goto" [style=dotted]
  "goto_m_goto":0 -> "move"
  "goto_m_goto":1 -> "goto"
  "goto_m_already_there" [
    label="{{\N|}|(truck-at ?l)\l}"
  ]
  "goto":1 -> "goto_m_already_there" [style=dotted]
}